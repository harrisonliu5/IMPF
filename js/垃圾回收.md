# V8垃圾回收

主要是基于分代式垃圾回收机制。
V8内存分为新生代和老生代两代。

新生代为存活时间较短对象，老生代中为存活时间较长的对象。

## 新生代

新生代主要通过 scavenge算法，在具体实现通过采用cheney.cheney是一种采用复制的方法实现的垃圾回收算法。

它将内存一份为二，每个空间叫semispace。一个处于使用，一个处于闲置。使用的叫from，闲置的为to。

先全部进from，存活的赋值到to，非存活的被释放，然后互换位置，再次进行回收，发现被回收过的直接到老生代，或者to的空间使用超过25%。
缺点是只能使用堆内存的一半，是一个空间换时间的办法。

## 老生代

主要用Mark-sweep和 Mark-compact.

Mark-sweep是编辑清除，标记需要释放的对象，然后清除。但是清除完后内存不连续，然后用Mark-compact,将活着的对象移动到一半，移动完后，直接清理边界外的内存。V8后续还引入了延迟出来，增量处理，并计划引入并行标记处理。
