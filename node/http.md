# Http

## 浏览器行为与http协议
 1.用户输入网址并回车
 2.浏览器先通过网关判断能不能链接internet。
 3.将域名通过DNS变成ip。-解析域名
 4.在达到服务器端，浏览器发送Http请求。
 5.服务器处理请求，返回HTML响应。
 6.浏览器处理HTML页面。

 ## HTTP 协议

 HTTP是超文本传输协议，从www服务器传到本地浏览器的一种传输协议，网站是基于HTTP协议的。

 HTTP协议是由从客户端到服务器的请求( request )和从服务器到客户的响应( response )进行约束和规范。

 ### TCP/IP 协议栈

1.应用层
    为客户提供所需的各种服务，例如：HTTP,FTP,DNS,SMTP等。

2.传输层
    为应用层实体提供端到端的通信功能，保证数据包的顺序传送及数据的完整性。
    该层定义了两个主要的协议：传输控制协议( TCP )和用户数据报协议( UDP );

3.网络层
    主要解决主机到主机的通信问题。IP协议是网际互联层最重要的协议。

4.网络接口层
    负责监视数据在主机和网络之间的交换。

### HTTP 在TCP/IP的位置

在应用层
http默认端口号是80，https默认端口号是443 

### http的工作过程
事务：比如做一件事，将其分为若干个动作，如果多个动作都成功，或者有一个动作失败就失败，这个叫事务。

一次http操作称为一个事务，分为四步：
1. 首先客户机和服务器需要建立连接。只要点击一个超级联机。http的工作开始。 -> TCP
2. 建立连接后，发送一个请求给服务器. -> request
3. 服务器接到请求后给予响应信息。 -> response
4. 客户端说道服务器返回的信息通过浏览器显示在屏幕上，然后客户端与服务器断开连接。

### 请求与响应

http请求组成： 请求行，消息报头、请求正文。
http响应组成：状态行、消息报头、响应正文。
请求行组成：以一个方法符号开头( get /post ....)，后面跟着请求的URI和协议的版本。
状态行组成：服务器HTTP协议的版本，服务器发回的响应状态代码和状态代码的文本描述。

## http代理和反向代理

代理就是局域网内不能直接访问外网服务器需要间接使用一个服务去访问，那这个服务就叫代理。

反向代理是 将不同的业务放在服务器端，然后客户请求不同的业务，通过反向代理去请求服务器上不同业务，并返给客户。

### 反向代理用途

1. 加密和ssl加速
2. 负载均衡
3. 缓存静态内容
4. 压缩
5. 减速上传
6. 安全
7. 外网发布

### 负载均衡

所有的请求转到一个中心DNS服务器，这个服务器通过循环复用DNS来反向代理服务器，反向服务器上有高速缓存，如果有动态数据，方向代理服务器会集中去动态数据服务器里拿，=。


